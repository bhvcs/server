서버 구축하기

1. NAT(network address translation)
2. public - private ip address
3. port forwarding
4. dynamic - static ip address
5. dynamic DNS

우리가 평소 컴퓨터를 통해 사용하던 것은 클라이언트로써의 행동임.

집에 공유가(router)가 있다. 공유기에는 공인 ip 주소가 할당되어 있다.
집에 해당 공유기를 사용하는 컴퓨터나 스마트폰 같은 기기들이 있다. 해당 기기들은 LAN, 즉 loacal
area network라고 하며, 이 안에는 우리가 사용하는 기기들과 공유기까지 포함한다. 이 LAN 안의 기기들은
사설 ip 주소를 각각 가지고 있다. 사설 ip 주소는 IPv4의 수용 한계를 해결하기 위함이라고 생각된다.
이런 private ip address는 LAN끼리의 기기들에서 서로 소통하는데 사용된다. 이와 반대로 누구나
접근할 수 잇는 주소는 public ip address라고 하며 공유기에 해당 public ip address가 할당되어 있다.
public ip 주소는 WAN, wide area network에서 사용된다.

NAT
우리 컴퓨터는 사설 ip 주소만 가지고 있다. 이는 외부와 직접적으로 소통할 수 없는 ip 주소이다.
그래서 있는게 NAT이다. 내 LAN 중에 외부와 소통할 수 있는 것은 공인 ip 주소를 가지고 있는 공유기이다.
개별 기기들은 공유기에 자신이 어디에 요청을 보냈다는 것을 기록한다. 그리고 NAT가 사설 ip 주소를 
공유기의 ip 주소로 변환해서 요청하고자 하는 서버에 보내준다. 응답을 받을 때면, 공유기에 기록된
정보를 토대로 받은 응답을 개별 기기에 재전달 해준다.

port forwarding
구축할 서버가 공유기를 사용한 컴퓨터일 경우 매우 중요해지는 개념이다.
다른 클라이언트로부터의 요청을 내 컴퓨터가 받아내야 한다. 클라이언트는 내 컴퓨터의 서버에 요청을
보내기 위해서는 먼저 라우터의 공인 ip 주소로 요청을 보내야 한다. 그럼 라우터는 서버가 돌아가는
기기에 해당 요청을 재전달 해주어야 한다. 그럴 때, 어느 ip+port로 전달할지 미리 정해놓는 것이
포트 포워딩 설정이다. 
이때 port를 왜 써야 하는지는, 첫번째로, 라우터가 어느 기기에 보낼 지 구분. 두번째로, 한 컴퓨터
내에서도 여러 서버가 돌 수도 있기 때문이겠다.

dynamic - static ip address
ISP(통신사)에서 사용 하지 않는 공유기의 ip 주소를 회수해서 다른 공유기에게 할당할 수도 있음.
이는 ip 주소의 부족을 보완하기 위한 방안임. 그래서 서버를 구축할 때 ip 주소가 바뀌었는지 확인
해야 할 수도 있다 라는 생각을 함. 고정된 ip 주소를 사용하기 위해서는 static ip address를
사용해야 한다. 이는 통신사에서 받을 수 있다. 만약 회사 서비스의 서버를 구축한다면 static ip address를
사용해야 할 수도 있다는 생각을 한다. 하지만 추가적인 비용이 있기에, 필요에 따라 정책을 고른다.

DHCP
Dynamic Host Configuration Protocol은 LAN 내의 개별 기기들의 ip 주소 뿐만 아니라, 사용하는
DNS server, subnet mask 등의 세부 설정까지도 동적, 자동으로 설정해준다. DHCP 서버는 공유기에
내장되어 있고, DHCP 클라이언트 또한 컴퓨터나 스마트폰 같은 곳에 내장되어 있다. 그래서 DHCP 서버와
클라이언트 간의 ip 할당이 이루어질 수 있는 것이다.
내 생각:
사내 서버를 구축한다면 사용하는 공유기의 DHCP 설정을 통해, 서버 컴퓨터의 ip를 static ip로 설정
하는 것이 좋을 듯 싶다. 
그게 아니라면 static ip 주소를 사용하는 공유기더라 하더라도
포트 포워딩 설정을 계속 바꿔야 할 수 있기 때문이다.

